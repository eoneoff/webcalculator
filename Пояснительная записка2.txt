Добавлен репозиторий, работающий на чистом ADO.NET. При первом запуске он проверяет наличие базы данных на (localDb)\MSSQLLocalDb и, в случае отсутствия, создает ее, устанавливает уровень совместимости на 110, создает таблицы пользователей и операций, индексы и хранимую процедуру для сохранения операций.

Сохранение операций происходит через хранимую процедуру, в которую передается ip пользователя и выражение. При наличии пользователя с таким ip процедура сохраняет выражение ему, при отсутствии, создает нового пользователя и сохраняет выражение.

Предыдущий код практически не изменен. Изменена строка подключения  базе в файле Web.config (удалена строка подключения для (localDb)\v11.0, раскомментирована строка для (localDb)\MSSQLLocalDb, добавлена строка подключения для сервера без указания базы для создания таблицы), в контейнер зависимостей внесен репозиторий на ADO.NET вместо репозитория на ADO.NET EF.

Папку roslyn я удалил, когда готовил проект к вложению в электронную почту — был уверен, что при компиляции она будет восстановлена. Похоже, в компоненте Visual Studio Microsoft.CodeDom.Providers.DotNetCompilerPlatform версии 1.0.7 (актуальная на данный момент 2.0.1) есть баг, из-за которого это не происходит. В новой версии проекта я ничего из папки bin веб-приложения не удалял.